# 实数

## 非比例数

考虑方程$$x^2=2$$，我们说方程没有比例数解。假设存在不可约比例数$$\frac pq$$满足$$\left(\frac pq\right)^2=2$$，则有$$p^2=2q^2$$，因此$$p$$为偶数，假设$$p=2r$$，则又有$$2r^2=q^2$$，因此$$q$$也为偶数，与$$\frac pq$$不可约矛盾。

为了得到该方程的近似解，我们可以使用二分法：首先选取两个有理数$$l_0,h_0 > 0$$满足$$l_0^2 < 2,h_0^2 > 2$$，则近似解必在两者中间，令$$m=l_0\oplus h_0$$为该方程的近似解。若要使近似解更加接近真实值，我们计算$$m_0^2$$，若$$m_0^2 < 2$$，则令$$l_1=l_0,h_1=m_0$$，否则令$$l_1=m_0,h_1=h_0$$，新的近似解为$$m_1=l_1\oplus h_1$$。以此类推，我们可以得到一系列近似值$$m_0,m_1,m_2,\ldots$$。请注意，该数列中每一项都是比例数，而逼近的真实值为非比例数。虽然比例数是稠密的，但仍然是有洞的，这些洞便是非比例数。

## 实数的构造

前面我们已经证明了非比例数的存在，并且举例说明非比例数可以用比例数逼近。实际上，比例数也同样可以用比例数数列逼近，例如$$r,r,r,\ldots$$逼近比例数$$r$$。我们将比例数和非比例数统一称为**实数**，记为$$\mathbb R$$，因此考虑用数列来表示实数。

我们需要定义什么叫逼近。首先，逼近是一个无限的过程。对于非比例数，我们不可能通过有限次逼近达到真实值，因为有限次逼近仍然为比例数；而对于比例数，尽管可以通过有限次逼近到达真实值，可认为之后的每一次逼近都为该值。另外，逼近最终将接近静止。即在充分长时间后，尽管不知道逼近值与真实值的误差，但要保证两个逼近值足够接近。

从数学上，我们记这个无穷过程，即逼近一个实数的比例数数列为$$\{a_n\}^\infty_0:=(a_0,a_1,a_2,\ldots)$$。为了刻画“接近静止”，我们需要选取一系列“尺子”来测量逼近值之间的距离，同样是一个比例数数列$$\{\varepsilon_n\}^\infty_0$$，“尺子”精度应该越来越高，所以有$$\varepsilon_0 > \varepsilon_1 > \varepsilon_2 > \cdots > 0$$。对于任意一把尺子$$\varepsilon_n$$来说，都应该在充分长时间$$N$$之后无法测出两个逼近值间的距离，即对于任意$$k>0,|a_{N+k+1}-a_{N+k}| < \varepsilon_n$$，因为尺子的精度有限。我们称一系列命题$$P(k)$$**最终成立**，如果$$\exists N > 0, \forall k > N: P(k)$$。因此，如果任意精度的尺子最终不能测量两相邻数列项间的距离，则该数列是个逼近。

**注意** _对于不同的尺子$$\varepsilon_n$$，无法测出两个逼近值间的距离所需要的时间$$N$$不同，故$$N$$是一个函数。_
**注意** _我们无法使用有限把尺子来确定“接近静止”，否则选取精度最高的一把尺子，我们总能构造一个比例数数列，使得该尺子无法衡量两个数之间的距离但它们并非充分接近。即不存在一把任意精度的尺子。_

如果一个数列$$\{a_n\}^\infty_0$$满足$$\forall \varepsilon > 0, \exists N > 0, \forall k > N: |a_{k+1}-a_k| < \varepsilon$$，我们称$$\{a_n\}^\infty_0$$为**柯西列**。每一个柯西列定义一个实数，称为该柯西列的**极限**，记作$$\lim_{n\to\infty}a_n$$。

特别地，我们定义$$\lim_{n\to\infty}a_n:=r$$如果$$\{a_n\}^\infty_0$$最终接近$$r$$，即任意一把尺子最终无法测量$$\{a_n\}^\infty_0$$与$$r$$的误差，用数学语言表示为$$\forall \varepsilon > 0, \exists N > 0, \forall k > N: |a_k-r| < \varepsilon$$。我们需要证明这个定义是良好的，即极限为$$r$$的比例数数列是柯西列。

**证明**：假设$$\lim_{n\to\infty}a_n:=r$$，据定义有$$\forall \varepsilon > 0, \exists N > 0, \forall k > N: |a_k-r| < \varepsilon/2 \wedge |a_{k+1}-r| < \varepsilon/2$$，故$$|a_{k+1}-a_k| = |(a_{k+1}-r)-(a_k-r)| \leq |a_{k+1}-r|+|a_k-r| < \varepsilon$$，故$$\{a_n\}^\infty_0$$是柯西列。

与比例数类似，一个实数可以有不同的柯西列表示，我们可以定义一个等价关系来解决这个问题。两个**柯西列等价**当且仅当它们有相同的极限。而两个柯西列$$\{a_n\}^\infty_0,\{b_n\}^\infty_0$$具有相同的极限意味着它们应该最终无限接近，即$$\lim_{n\to\infty}|a_n-b_n|=0$$。

如果记所有柯西列的集合为$$\mathscr C$$，柯西列等价的等价关系为$$\sim$$，则实数域可表示为商集$$\mathbb R:=\mathscr C \setminus \sim$$。

## 算数运算

假设实数$$a=:\{a_n\}^\infty_0,b=:\{b_n\}^\infty_0$$，我们定义实数的四则运算如下：

* $$a \pm b := \{a_n \pm b_n\}^\infty_0$$
* $$ab := \{a_nb_n\}^\infty_0$$
* $$a/b := \{a_n/b_n:b_n\neq0\}^\infty_0 \quad (b\neq0)$$

**注意** _定义除法时，需要去除数列$$\{b_n\}^\infty_0$$中的有限个零项以保证运算的合法性，但不影响结果。_

读者可以自行证明定义的良好性。

同比例数类似，实数具有以下性质：

* 加法交换律、乘法交换律：$$x+y=y+x, xy=yx$$
* 加法结合律、乘法结合律: $$(x+y)+z=x+(y+z), (xy)z=x(yz)$$
* 乘法对加法的分配律：$$x(y+z)=xy+xz$$

## 全序性

定义一个实数$$a=:\{a_n\}^\infty_0$$为**正**如果$$\{a_n\}^\infty_0$$最终大于$$0$$，记作$$a > 0$$，如果为**负**如果最终小于$$0$$，记作$$a < 0$$。定义$$a < b$$如果$$a-b < 0$$，$$a > b$$如果 $$a-b > 0$$。

不难证明，实数也具有全序性，并且是稠密的。

## 实数的表示

我们对于比例数和实数的构造都是通过构造商集，然后引入四则运算实现的，但是通常我们使用时，尤其在计算机中，习惯于用十进小数表示。两种表示实际上是等价的：任意给定一个比例数$$\frac pq$$，可以通过除法化作十进小数$$p \div q$$；给定一个十进小数$$\pm b_0.b_1b_2\cdots$$，也可以构造比例数数列$$\{\pm(b_0+\frac{b_1\cdots b_n}{10^n})\}_0^\infty$$。

事实上，实数还有诸多表示方法，例如连分数表示，例如：
$$\displaystyle{\frac{27}8=3+\frac38=3+\frac1{2+\frac23}=3+\frac1{2+\frac1{1+\frac12}}}=:[3;2,1,2]$$
$$\displaystyle{\sqrt2=1+\frac1{2+\frac1{2+\frac1{2+\cdots}}}}=:[1;2,2,2,\cdots]$$